/*
@header({
  searchable: 2,
  filterable: 1,
  quickSearch: 0,
  title: '小苹果',
  author: 'EylinSir',
  '类型': '影视',
  lang: 'ds'
})
*/

dmFyIHJ1bGUgPSB7CiAgICDnsbvlnos6ICflvbHop4YnLAogICAgdGl0bGU6ICflsI/oi7nmnpwnLAogICAgYXV0aG9yOiAnRXlsaW5TaXInLAogICAgaG9zdDogJ2h0dHA6Ly9zdS5oYW90di5zaXRlJywKICAgIGhlYWRlcnM6IHsKICAgICAgICAiVXNlci1BZ2VudCI6ICJva2h0dHAvMy4xMi4xMSIKICAgIH0sCiAgICBzZWFyY2hVcmw6ICcvYXBpLnBocC92Mi52b2QvYW5kcm9pZHNlYXJjaDEwMDg2P3BhZ2U9ZnlwYWdlJndkPSoqJywKICAgIHNlYXJjaGFibGU6IDIsCiAgICBxdWlja1NlYXJjaDogMCwKICAgIGZpbHRlcmFibGU6IDEsCiAgICB0aW1lb3V0OiA1MDAwLAogICAgcGxheV9wYXJzZTogdHJ1ZSwKCiAgICDpooTlpITnkIY6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgdXJsID0gdGhpcy5ob3N0ICsgIi9hcGkucGhwL3YyLnZvZC9hbmRyb2lkdHlwZXMiOwogICAgICAgIGxldCBodG1sID0gYXdhaXQgcmVxdWVzdCh1cmwsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pOwogICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShodG1sKTsKICAgICAgICBsZXQgY2xhc3NlcyA9IFtdOwogICAgICAgIGxldCBmaWx0ZXJzID0ge307CiAgICAgICAgbGV0IGR5ID0geyAiY2xhc3NlcyI6ICLnsbvlnosiLCAiYXJlYXMiOiAi5Zyw5Yy6IiwgInllYXJzIjogIuW5tOS7vSIsICJzb3J0YnkiOiAi5o6S5bqPIiB9OwogICAgICAgIGxldCBkZW1vcyA9IFsn5pe26Ze0JywgJ+S6uuawlCcsICfor4TliIYnXTsKICAgICAgICAKICAgICAgICBkYXRhLmRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGl0ZW0udHlwZV9uYW1lKTsKICAgICAgICAgICAgbGV0IHR5cGVJZCA9IGl0ZW0udHlwZV9pZC50b1N0cmluZygpOwogICAgICAgICAgICBpdGVtWydzb3J0YnknXSA9IFsndXBkYXRldGltZScsICdoaXRzJywgJ3Njb3JlJ107CiAgICAgICAgICAgIGxldCBmaWx0ZXJBcnJheSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZHkpIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtW2tleV0gJiYgaXRlbVtrZXldLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gW107CiAgICAgICAgICAgICAgICAgICAgaXRlbVtrZXldLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2U3RyID0gdmFsLnRvU3RyaW5nKCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodlN0ciAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHsgIm4iOiBrZXkgPT09ICJzb3J0YnkiID8gZGVtb3NbaWR4XSA6IHZTdHIsICJ2IjogdlN0ciB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCBmS2V5ID0ga2V5ID09PSAiYXJlYXMiID8gImFyZWFlcyIgOiAoa2V5ID09PSAieWVhcnMiID8gInllYXJlcyIgOiBrZXkpOwogICAgICAgICAgICAgICAgICAgIGZpbHRlckFycmF5LnB1c2goeyAia2V5IjogZktleSwgIm5hbWUiOiBkeVtrZXldLCAidmFsdWUiOiB2YWx1ZXMgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmlsdGVyc1t0eXBlSWRdID0gZmlsdGVyQXJyYXk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgdGhpcy5jbGFzc19uYW1lID0gY2xhc3Nlcy5qb2luKCcmJyk7CiAgICAgICAgdGhpcy5jbGFzc191cmwgPSBkYXRhLmRhdGEubWFwKGl0ZW0gPT4gaXRlbS50eXBlX2lkKS5qb2luKCcmJyk7CiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXJzOwogICAgICAgIHJldHVybiBbXTsKICAgIH0sCgogICAg5o6o6I2QOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgbGV0IHVybCA9IHRoaXMuaG9zdCArICIvYXBpLnBocC92Mi5tYWluL2FuZHJvaWRob21lIjsKICAgICAgICBsZXQgaHRtbCA9IGF3YWl0IHJlcXVlc3QodXJsLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTsKICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoaHRtbCk7CiAgICAgICAgbGV0IGQgPSBbXTsKICAgICAgICBkYXRhLmRhdGEubGlzdC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgICBpLmxpc3QuZm9yRWFjaCh2b2QgPT4gewogICAgICAgICAgICAgICAgbGV0IHIgPSB2b2QudXBkYXRlSW5mbyA/ICLmm7TmlrDoh7MiICsgdm9kLnVwZGF0ZUluZm8gOiAiIjsKICAgICAgICAgICAgICAgIGQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHZvZC5uYW1lLAogICAgICAgICAgICAgICAgICAgIHBpY191cmw6IHZvZC5waWMsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogciB8fCAodm9kLnNjb3JlID8gdm9kLnNjb3JlLnRvU3RyaW5nKCkgOiAiIiksCiAgICAgICAgICAgICAgICAgICAgdXJsOiB2b2QuaWQudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBzZXRSZXN1bHQoZCk7CiAgICB9LAoKICAgIOS4gOe6pzogYXN5bmMgZnVuY3Rpb24gKHRpZCwgcGcsIGZpbHRlciwgZXh0ZW5kKSB7CiAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgInBhZ2UiOiBwZywKICAgICAgICAgICAgInR5cGUiOiB0aWQsCiAgICAgICAgICAgICJhcmVhIjogZXh0ZW5kLmFyZWFlcyB8fCAnJywKICAgICAgICAgICAgInllYXIiOiBleHRlbmQueWVhcmVzIHx8ICcnLAogICAgICAgICAgICAic29ydGJ5IjogZXh0ZW5kLnNvcnRieSB8fCAnJywKICAgICAgICAgICAgImNsYXNzIjogZXh0ZW5kLmNsYXNzZXMgfHwgJycKICAgICAgICB9OwogICAgICAgIGxldCBxdWVyeSA9IE9iamVjdC5rZXlzKHBhcmFtcykuZmlsdGVyKGsgPT4gcGFyYW1zW2tdICE9PSAnJykubWFwKGsgPT4gayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba10pKS5qb2luKCcmJyk7CiAgICAgICAgbGV0IHVybCA9IHRoaXMuaG9zdCArICcvYXBpLnBocC92Mi52b2QvYW5kcm9pZGZpbHRlcjEwMDg2PycgKyBxdWVyeTsKICAgICAgICBsZXQgaHRtbCA9IGF3YWl0IHJlcXVlc3QodXJsLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTsKICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoaHRtbCk7CiAgICAgICAgbGV0IGQgPSBbXTsKICAgICAgICBkYXRhLmRhdGEuZm9yRWFjaCh2b2QgPT4gewogICAgICAgICAgICBsZXQgciA9IHZvZC51cGRhdGVJbmZvID8gIuabtOaWsOiHsyIgKyB2b2QudXBkYXRlSW5mbyA6ICIiOwogICAgICAgICAgICBkLnB1c2goewogICAgICAgICAgICAgICAgdGl0bGU6IHZvZC5uYW1lLAogICAgICAgICAgICAgICAgcGljX3VybDogdm9kLnBpYywKICAgICAgICAgICAgICAgIGRlc2M6IHIgfHwgKHZvZC5zY29yZSA/IHZvZC5zY29yZS50b1N0cmluZygpIDogIiIpLAogICAgICAgICAgICAgICAgdXJsOiB2b2QuaWQudG9TdHJpbmcoKQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gc2V0UmVzdWx0KGQpOwogICAgfSwKCiAgICDkuoznuqc6IGFzeW5jIGZ1bmN0aW9uIChpZCkgewogICAgICAgIGxldCB1cmwgPSB0aGlzLmhvc3QgKyAnL2FwaS5waHAvdjMudm9kL2FuZHJvaWRkZXRhaWwyP3ZvZF9pZD0nICsgaWQ7CiAgICAgICAgbGV0IGh0bWwgPSBhd2FpdCByZXF1ZXN0KHVybCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7CiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGh0bWwpLmRhdGE7CiAgICAgICAgLy8g6L+H5ruk5o6J5YyF5ZCr4oCc5Y+K5pe26Zuo4oCd55qE6YCJ6ZuGCiAgICAgICAgbGV0IGZpbHRlcmVkVXJscyA9IGRhdGEudXJscy5maWx0ZXIoaSA9PiAhaS5rZXkuaW5jbHVkZXMoIuWPiuaXtumbqCIpKTsKICAgICAgICBsZXQgcGxheWxpc3QgPSBmaWx0ZXJlZFVybHMubWFwKGkgPT4gaS5rZXkgKyAnJCcgKyBpLnVybCkuam9pbignIycpOwoKICAgICAgICBsZXQgVk9EID0gewogICAgICAgICAgICB2b2RfbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgICB2b2RfeWVhcjogZGF0YS55ZWFyLAogICAgICAgICAgICB2b2RfYXJlYTogZGF0YS5hcmVhLAogICAgICAgICAgICB2b2RfbGFuZzogZGF0YS5sYW5nLAogICAgICAgICAgICB0eXBlX25hbWU6IGRhdGEuY2xhc3NOYW1lLAogICAgICAgICAgICB2b2RfYWN0b3I6IGRhdGEuYWN0b3IsCiAgICAgICAgICAgIHZvZF9kaXJlY3RvcjogZGF0YS5kaXJlY3RvciwKICAgICAgICAgICAgdm9kX2NvbnRlbnQ6IGRhdGEuY29udGVudCwKICAgICAgICAgICAgdm9kX3BsYXlfZnJvbTogJ+Wwj+iLueaenCcsCiAgICAgICAgICAgIHZvZF9wbGF5X3VybDogcGxheWxpc3QKICAgICAgICB9OwogICAgICAgIHJldHVybiBWT0Q7CiAgICB9LAoKICAgIOaQnOe0ojogYXN5bmMgZnVuY3Rpb24gKHdkLCBxdWljaywgcGcpIHsKICAgICAgICBsZXQgcGFnZSA9IHBnIHx8ICcxJzsKICAgICAgICBsZXQgdXJsID0gdGhpcy5ob3N0ICsgJy9hcGkucGhwL3YyLnZvZC9hbmRyb2lkc2VhcmNoMTAwODY/cGFnZT0nICsgcGFnZSArICcmd2Q9JyArIGVuY29kZVVSSUNvbXBvbmVudCh3ZCk7CiAgICAgICAgbGV0IGh0bWwgPSBhd2FpdCByZXF1ZXN0KHVybCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7CiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGh0bWwpOwogICAgICAgIGxldCBkID0gW107CiAgICAgICAgZGF0YS5kYXRhLmZvckVhY2godm9kID0+IHsKICAgICAgICAgICAgbGV0IHIgPSB2b2QudXBkYXRlSW5mbyA/ICLmm7TmlrDoh7MiICsgdm9kLnVwZGF0ZUluZm8gOiAiIjsKICAgICAgICAgICAgZC5wdXNoKHsKICAgICAgICAgICAgICAgIHRpdGxlOiB2b2QubmFtZSwKICAgICAgICAgICAgICAgIHBpY191cmw6IHZvZC5waWMsCiAgICAgICAgICAgICAgICBkZXNjOiByIHx8ICh2b2Quc2NvcmUgPyB2b2Quc2NvcmUudG9TdHJpbmcoKSA6ICIiKSwKICAgICAgICAgICAgICAgIHVybDogdm9kLmlkLnRvU3RyaW5nKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHNldFJlc3VsdChkKTsKICAgIH0sCgogICAgbGF6eTogYXN5bmMgZnVuY3Rpb24gKGZsYWcsIGlkKSB7CiAgICAgICAgbGV0IHBsYXlVcmwgPSBpZDsKICAgICAgICBpZiAoIWlkLnN0YXJ0c1dpdGgoJ2h0dHAnKSkgewogICAgICAgICAgICBwbGF5VXJsID0gImh0dHA6Ly9zLnhwZ3R2Lm5ldC9tM3U4LyIgKyBpZCArICIubTN1OCI7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHBsYXlIZWFkZXIgPSB7CiAgICAgICAgICAgICd1c2VyX2lkJzogJ1hQR0JPWCcsCiAgICAgICAgICAgICd0b2tlbjInOiAnWDI4dHBIT09pQ0I2VDJWZGR5TGFGTlY0SlpUMCtpOUVwODgrcldMY1JQSlhVa1Zoc1R4NXE5QmUyTjg9JywKICAgICAgICAgICAgJ3ZlcnNpb24nOiAnWFBHQk9YIGNvbS5waG9lbml4LnR2MS42LjEnLAogICAgICAgICAgICAnaGFzaCc6ICdiZDU2JywKICAgICAgICAgICAgJ3NjcmVlbngnOiAnMjI2OCcsCiAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMTcuMC4wLjAgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgICAgICd0b2tlbic6ICdZejBRaUNxb3JENEpkbFZxUVRlNEpKQjBKYXpJMlJVamcvOXNtQUdoZHRSUU0zSVhtaVJ4MlBFdDR0OUVVRlMrQmlJeUJmZkZhNE1QTUprT1pRSnFlL0FwQzNVOXdtMmlEVzlqV3JGQ1d3UjltRHd1TVFVMzNBK0YvVnlRT2hJL2pZeEtaRnNHT2NtV2lseHFMeWxYOGJMTE5uQVU1amFUclNQd1JPK0RmQm5JZGhja1dsZDRWMWsyWmZaM1FLYk4nLAogICAgICAgICAgICAndGltZXN0YW1wJzogJzE3NjgxMDk5NDQnLAogICAgICAgICAgICAnc2NyZWVueSc6ICcxMTE2JwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcGFyc2U6IDAsCiAgICAgICAgICAgIHVybDogcGxheVVybCwKICAgICAgICAgICAgaGVhZGVyOiBwbGF5SGVhZGVyCiAgICAgICAgfTsKICAgIH0KfTs=