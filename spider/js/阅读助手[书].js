/*
@header({
  searchable: 2,
  filterable: 1,
  quickSearch: 0,
  title: '阅读助手[书]',
  author: 'EylinSir',
  '类型': '小说',
  lang: 'ds'
})
*/

dmFyIHJ1bGUgPSB7CiAgICDnsbvlnos6ICflsI/or7QnLAogICAgYXV0aG9yOiAnRXlsaW5TaXInLAogICAgdGl0bGU6ICfpmIXor7vliqnmiYtb5LmmXScsCiAgICBkZXNjOiAn6ZiF6K+75Yqp5omL5bCP6K+05rqQJywKICAgIGhvc3Q6ICdodHRwczovL2FwaS1iYy53dHp3LmNvbScsCiAgICBjaGFwdGVySG9zdDogJ2h0dHBzOi8vYXBpLWtzLnd0encuY29tJywKICAgIGhvbWVVcmw6ICdodHRwczovL2FwaS1iYy53dHp3LmNvbScsCiAgICB1cmw6ICcvYXBpL3Y0L2NhdGVnb3J5L2dldC1saXN0P2dlbmRlcj1meWNsYXNzJmNhdGVnb3J5X2lkPWZ5ZmlsdGVyJm5lZWRfZmlsdGVycz0xJnBhZ2U9ZnlwYWdlJm5lZWRfY2F0ZWdvcnk9MScsCiAgICBjbGFzc19uYW1lOiAn55S355SfJuWls+eUnyblh7rniYgnLAogICAgY2xhc3NfdXJsOiAnMSYyJjMnLAogICAgc2VhcmNoVXJsOiAnL2FwaS92NS9zZWFyY2gvd29yZHM/Z2VuZGVyPTMmaW1laV9pcD0yOTM3MzU3MTA3JnBhZ2U9ZnlwYWdlJndkPSoqJywKICAgIHNlYXJjaGFibGU6IDIsCiAgICBxdWlja1NlYXJjaDogMCwKICAgIGZpbHRlcmFibGU6IDEsCiAgICBmaWx0ZXI6IHsKICAgICAgICAiMSI6IFt7a2V5OiAidHlwZSIsIG5hbWU6ICLnsbvlnosiLCB2YWx1ZTogW3sibiI6IueOhOW5u+Wlh+W5uyIsInYiOiIyMDIifSx7Im4iOiLpg73luILkurrnlJ8iLCJ2IjoiMjAzIn0seyJuIjoi5q2m5L6g5LuZ5L6gIiwidiI6IjIwNSJ9LHsibiI6IuWOhuWPsuWGm+S6iyIsInYiOiI1NiJ9LHsibiI6IuenkeW5u+acq+S4liIsInYiOiI2NCJ9LHsibiI6Iua4uOaIj+ernuaKgCIsInYiOiI3NSJ9LHsibiI6IuS9k+iCsui1m+S6iyIsInYiOiIyMDYifSx7Im4iOiLlpYfpl7vlvILkuosiLCJ2IjoiMjA0In1dfV0sCiAgICAgICAgIjIiOiBbe2tleTogInR5cGUiLCBuYW1lOiAi57G75Z6LIiwgdmFsdWU6IFt7Im4iOiLnjrDku6PoqIDmg4UiLCJ2IjoiMSJ9LHsibiI6IuWPpOS7o+iogOaDhSIsInYiOiIyIn0seyJuIjoi5bm75oOz6KiA5oOFIiwidiI6IjQifSx7Im4iOiLnp43nlLDnu4/llYYiLCJ2IjoiMTYifV19XSwKICAgICAgICAiMyI6IFt7a2V5OiAidHlwZSIsIG5hbWU6ICLnsbvlnosiLCB2YWx1ZTogW3sibiI6IuaWh+WtpuiJuuacryIsInYiOiIyNDAifSx7Im4iOiLkurrmlofnp5HnpL4iLCJ2IjoiMjQxIn0seyJuIjoi57uP566h5Yqx5b+XIiwidiI6IjI0MiJ9LHsibiI6Iue7j+WFuOaWh+WtpiIsInYiOiIyNDMifSx7Im4iOiLkurrniankvKDorrAiLCJ2IjoiMjQ3In0seyJuIjoi5bCR5YS/5pWZ6IKyIiwidiI6IjI1OCJ9LHsibiI6IuWPpOS7o+iogOaDhSIsInYiOiIyNTkifSx7Im4iOiLnjrDku6PoqIDmg4UiLCJ2IjoiMjYwIn0seyJuIjoi5oKs55aR5o6o55CGIiwidiI6IjI2MiJ9LHsibiI6IuWOhuWPsuS8oOiusCIsInYiOiIyNjQifSx7Im4iOiLpnZLmmKXmloflraYiLCJ2IjoiMjY1In0seyJuIjoi546w5a6e5bCP6K+0IiwidiI6IjI2NiJ9LHsibiI6IuS7meS+oOWlh+e8mCIsInYiOiIyNzYifSx7Im4iOiLku5nkvqDlpYflubsiLCJ2IjoiMjg4In0seyJuIjoi5q2m5L6g5bCP6K+0IiwidiI6IjI4OSJ9LHsibiI6IueOsOS7o+WGm+aXhSIsInYiOiIyOTAifV19XQogICAgfSwKICAgIGZpbHRlcl91cmw6ICJ7e2ZsLnR5cGV9fSIsCiAgICBmaWx0ZXJfZGVmOiB7fSwKICAgIGhlYWRlcnM6IHsnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTM5LjAuMC4wIFNhZmFyaS81MzcuMzYnfSwKICAgIHNpZ25faGVhZGVyczogewogICAgICAgICJhcHAtdmVyc2lvbiI6ICI1MTExMCIsICJwbGF0Zm9ybSI6ICJhbmRyb2lkIiwgInJlZyI6ICIwIiwgIkFVVEhPUklaQVRJT04iOiAiIiwKICAgICAgICAiYXBwbGljYXRpb24taWQiOiAiY29tLioqKioucmVhZGVyIiwgIm5ldC1lbnYiOiAiMSIsICJjaGFubmVsIjogInVua25vd24iLCAicW0tcGFyYW1zIjogIiIKICAgIH0sCiAgICB0aW1lb3V0OiAxMDAwMCwKICAgIHBsYXlfcGFyc2U6IHRydWUsCgogICAgYXBpUmVxdWVzdDogYXN5bmMgZnVuY3Rpb24gKGVuZHBvaW50LCBwYXJhbXMgPSB7fSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgICAgY29uc3QgaG9zdCA9IG9wdGlvbnMuaG9zdCB8fCB0aGlzLmhvc3Q7CiAgICAgICAgcGFyYW1zLmltZWlfaXAgPSBwYXJhbXMuaW1laV9pcCB8fCAnMjkzNzM1NzEwNyc7CiAgICAgICAgcGFyYW1zLnNpZ24gPSBnZXRTaWduU3RyKHBhcmFtcyk7CiAgICAgICAgY29uc3QgdXJsID0gYnVpbGRVcmwoYCR7aG9zdH0ke2VuZHBvaW50fWAsIHBhcmFtcyk7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3QodXJsLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB8fCB0aGlzLnNpZ25faGVhZGVycywKICAgICAgICAgICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCB8fCAnR0VUJwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTsKICAgIH0sCiAgICAKICAgIHJlcXVlc3Q6IGFzeW5jIGZ1bmN0aW9uICh1cmwsIG9iaikgewogICAgICAgIG9iaiA9IG9iaiB8fCB7fTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9mZXRjaCh1cmwsIHsKICAgICAgICAgICAgbWV0aG9kOiBvYmoubWV0aG9kIHx8ICdHRVQnLAogICAgICAgICAgICBoZWFkZXJzOiBvYmouaGVhZGVycyB8fCB0aGlzLmhlYWRlcnMKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOwogICAgfSwKCiAgICDpooTlpITnkIY6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnNpZ25faGVhZGVycy5zaWduID0gZ2V0U2lnblN0cih0aGlzLnNpZ25faGVhZGVycyk7CiAgICB9LAoKICAgIOS4gOe6pzogYXN5bmMgZnVuY3Rpb24gKHRpZCwgcGcsIGZpbHRlciwgZXh0ZW5kKSB7CiAgICAgICAgbGV0IGQgPSBbXTsKICAgICAgICBjb25zdCBjYXRlTWFwID0geycxJzonMjAyJywgJzInOicxJywgJzMnOicyNDAnfTsKICAgICAgICBjb25zdCB0eXBlSWQgPSB0aWQgIT09ICctMScgPyB0aWQgOiAnMic7CiAgICAgICAgbGV0IGNhdGVnb3J5X2lkID0gY2F0ZU1hcFt0eXBlSWRdIHx8ICcxJzsKICAgICAgICBjb25zdCB2YWxpZFN1YlR5cGVzU2V0ID0gbmV3IFNldCgpOwogICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5maWx0ZXIpLmZvckVhY2goZmlsdGVyR3JvdXAgPT4gewogICAgICAgICAgICBmaWx0ZXJHcm91cC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgaXRlbS52YWx1ZS5mb3JFYWNoKHN1YlR5cGUgPT4gewogICAgICAgICAgICAgICAgICAgIHZhbGlkU3ViVHlwZXNTZXQuYWRkKHN1YlR5cGUudik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgaWYgKGV4dGVuZD8udHlwZSAmJiB2YWxpZFN1YlR5cGVzU2V0LmhhcyhleHRlbmQudHlwZSkpIHsKICAgICAgICAgICAgY2F0ZWdvcnlfaWQgPSBleHRlbmQudHlwZTsKICAgICAgICB9IGVsc2UgaWYgKGZpbHRlciAmJiB2YWxpZFN1YlR5cGVzU2V0LmhhcyhmaWx0ZXIpKSB7CiAgICAgICAgICAgIGNhdGVnb3J5X2lkID0gZmlsdGVyOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIGdlbmRlcjogdHlwZUlkLAogICAgICAgICAgICBjYXRlZ29yeV9pZDogY2F0ZWdvcnlfaWQsCiAgICAgICAgICAgIG5lZWRfZmlsdGVyczogJzEnLAogICAgICAgICAgICBwYWdlOiBwZyB8fCAnMScsCiAgICAgICAgICAgIG5lZWRfY2F0ZWdvcnk6ICcxJwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS92NC9jYXRlZ29yeS9nZXQtbGlzdCcsIHBhcmFtcyk7CiAgICAgICAgaWYgKGpzb24/LmRhdGE/LmJvb2tzKSB7CiAgICAgICAgICAgIGQgPSBqc29uLmRhdGEuYm9va3MubWFwKGl0ID0+ICh7CiAgICAgICAgICAgICAgICB0aXRsZTogaXQudGl0bGUsCiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuaG9zdH0vYXBpL3Y0L2Jvb2svZGV0YWlsP2lkPSR7aXQuaWR9YCwKICAgICAgICAgICAgICAgIGRlc2M6IGl0LmF1dGhvciwKICAgICAgICAgICAgICAgIHBpY191cmw6IGl0LmltYWdlX2xpbmssCiAgICAgICAgICAgICAgICBjb250ZW50OiBpdC5pbnRybwogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZXRSZXN1bHQoZCk7CiAgICB9LAoKICAgIOS6jOe6pzogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBWT0QgPSB7fTsKICAgICAgICBsZXQgYm9va0lkID0gdGhpcy5pbnB1dC5tYXRjaCgvaWQ9KFxkKykvKVsxXTsKICAgICAgICBjb25zdCBkZXRhaWxKc29uID0gYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL3Y0L2Jvb2svZGV0YWlsJywgewogICAgICAgICAgICBpZDogYm9va0lkLAogICAgICAgICAgICB0ZWVueV9tb2RlOiAnMCcKICAgICAgICB9KTsKICAgICAgICBpZiAoZGV0YWlsSnNvbj8uZGF0YT8uYm9vaykgewogICAgICAgICAgICBsZXQgYm9vayA9IGRldGFpbEpzb24uZGF0YS5ib29rOwogICAgICAgICAgICBWT0QgPSB7CiAgICAgICAgICAgICAgICB2b2RfbmFtZTogYm9vay50aXRsZSwKICAgICAgICAgICAgICAgIHR5cGVfbmFtZTogYm9vay5ib29rX3RhZ19saXN0Py5tYXAodGFnID0+IHRhZy50aXRsZSkuam9pbignLCcpIHx8ICcnLAogICAgICAgICAgICAgICAgdm9kX3BpYzogYm9vay5pbWFnZV9saW5rLAogICAgICAgICAgICAgICAgdm9kX2NvbnRlbnQ6IGJvb2suaW50cm8sCiAgICAgICAgICAgICAgICB2b2RfcmVtYXJrczogYm9vay5sYXRlc3RfY2hhcHRlcl90aXRsZSwKICAgICAgICAgICAgICAgIHZvZF95ZWFyOiAnJywgdm9kX2FyZWE6ICcnLAogICAgICAgICAgICAgICAgdm9kX2FjdG9yOiBib29rLmF1dGhvciwgdm9kX2RpcmVjdG9yOiBib29rLmF1dGhvciwKICAgICAgICAgICAgICAgIHZvZF9wbGF5X2Zyb206ICfpmIXor7vliqnmiYsnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHRvY0pzb24gPSBhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvdjEvY2hhcHRlci9jaGFwdGVyLWxpc3QnLCB7CiAgICAgICAgICAgICAgICBpZDogYm9vay5pZAogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBob3N0OiB0aGlzLmNoYXB0ZXJIb3N0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAodG9jSnNvbj8uZGF0YT8uY2hhcHRlcl9saXN0cykgewogICAgICAgICAgICAgICAgVk9ELnZvZF9wbGF5X3VybCA9IHRvY0pzb24uZGF0YS5jaGFwdGVyX2xpc3RzLm1hcChjaGFwdGVyID0+IAogICAgICAgICAgICAgICAgICAgIGAke2NoYXB0ZXIudGl0bGV9JCR7Ym9vay5pZH1AQCR7Y2hhcHRlci5pZH1AQCR7Y2hhcHRlci50aXRsZX1gCiAgICAgICAgICAgICAgICApLmpvaW4oJyMnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gVk9EOwogICAgfSwKCiAgICDmkJzntKI6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgZCA9IFtdOwogICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvdjUvc2VhcmNoL3dvcmRzJywgewogICAgICAgICAgICBnZW5kZXI6ICczJywKICAgICAgICAgICAgcGFnZTogdGhpcy5NWV9QQUdFLAogICAgICAgICAgICB3ZDogdGhpcy5LRVkKICAgICAgICB9KTsKICAgICAgICBpZiAoanNvbj8uZGF0YT8uYm9va3MpIHsKICAgICAgICAgICAgZCA9IGpzb24uZGF0YS5ib29rcy5tYXAoaXQgPT4gKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBpdC5vcmlnaW5hbF90aXRsZSwKICAgICAgICAgICAgICAgIGRlc2M6IGl0LmF1dGhvciwKICAgICAgICAgICAgICAgIHBpY191cmw6IGl0LmltYWdlX2xpbmssCiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuaG9zdH0vYXBpL3Y0L2Jvb2svZGV0YWlsP2lkPSR7aXQuaWR9YCwKICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0LmludHJvCiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNldFJlc3VsdChkKTsKICAgIH0sCgogICAgbGF6eTogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBbYm9va0lkLCBjaGFwdGVySWQsIHRpdGxlXSA9IHRoaXMuaW5wdXQuc3BsaXQoJ0BAJyk7CiAgICAgICAgbGV0IGNvbnRlbnQgPSAn5YaF5a655Yqg6L295aSx6LSlJzsKICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL3YxL2NoYXB0ZXIvY29udGVudCcsIHsKICAgICAgICAgICAgaWQ6IGJvb2tJZCwKICAgICAgICAgICAgY2hhcHRlcklkCiAgICAgICAgfSwgewogICAgICAgICAgICBob3N0OiB0aGlzLmNoYXB0ZXJIb3N0CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGpzb24/LmRhdGE/LmNvbnRlbnQpIGNvbnRlbnQgPSBkZWNvZGVDb250ZW50KGpzb24uZGF0YS5jb250ZW50KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYXJzZTogMCwKICAgICAgICAgICAgdXJsOiBgbm92ZWw6Ly8ke0pTT04uc3RyaW5naWZ5KHt0aXRsZSwgY29udGVudH0pfWAsCiAgICAgICAgICAgIGpzOiAnJwogICAgICAgIH07CiAgICB9Cn07CgpmdW5jdGlvbiBnZXRTaWduU3RyKHBhcmFtcykgewogICAgY29uc3Qgc2lnbl9rZXkgPSAiZDNkR2lKYzY1MWdTUTh3MSI7CiAgICByZXR1cm4gbWQ1KE9iamVjdC5rZXlzKHBhcmFtcykuc29ydCgpLnJlZHVjZSgocHJlLCBuKSA9PiBwcmUgKyBuICsgIj0iICsgcGFyYW1zW25dLCAiIikgKyBzaWduX2tleSk7Cn0KCmZ1bmN0aW9uIGRlY29kZUNvbnRlbnQoY29udGVudCkgewogICAgbGV0IGtleSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKCIyNDJjY2I4MjMwZDcwOWUxIik7CiAgICBsZXQgaXZFbmNEYXRhID0gQ3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShjb250ZW50KTsKICAgIGxldCBpdiA9IENyeXB0b0pTLmxpYi5Xb3JkQXJyYXkuY3JlYXRlKGl2RW5jRGF0YS53b3Jkcy5zbGljZSgwLCA0KSk7CiAgICBsZXQgZW5jcnlwdGVkID0gQ3J5cHRvSlMubGliLldvcmRBcnJheS5jcmVhdGUoaXZFbmNEYXRhLndvcmRzLnNsaWNlKDQpKTsKICAgIGxldCBkZWNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdCh7Y2lwaGVydGV4dDogZW5jcnlwdGVkfSwga2V5LCB7CiAgICAgICAgaXYsIG1vZGU6IENyeXB0b0pTLm1vZGUuQ0JDLCBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICAgIH0pOwogICAgcmV0dXJuIGRlY3J5cHRlZC50b1N0cmluZyhDcnlwdG9KUy5lbmMuVXRmOCk7Cn0=
